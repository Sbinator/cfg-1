#!/usr/bin/env hy

;; hiss :: wrapper around the threading macro ->

(import [sys [stdin argv]])
(import [io [StringIO]])

;; Take argument from stdin
(setv input (.strip (first stdin)))
;; Get chained operations
(setv operations (.join " " (rest argv)))
;; Reader macro
(setv buff (StringIO (+ "(-> \"" input "\" " operations ")")))
;; Return output
(print (eval (read buff)))
